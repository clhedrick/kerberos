.TH CREDSERV 8
.SH NAME
credserv \- provide Kerberos credentials from keytab stored to remote client
.SH SYNOPSIS
.B credserv
[ -d ]
.SH DESCRIPTION
.I  kgetcred
is designed for cron jobs or services that need access to Kerberos
credentials, but don't have an interactive user to supply them.
Kgetcred sends a request to a credserv server. The server looks
for a standard Kerberos keytab stores in a directory of the form
/var/credserv/USER
In each directory /var/credserv/USER there's a file INDEX with lines
that look like
.PP
host:principal:flags
.PP
where flags is optional. Currently the only supported option is F, for
forwardable. Each line indicatest that the user is permitted to 
get credentials for that principal on that host. The F option indicates
that the credentials should be forwardable. 
.PP
Each distinct principal will have a corresponding keytab in the same directory.
The keytab will be in a file whose name is the whole principal, including domain.
There's no extension on the file, just the principal name.
.PP
Because anonymous kinit isn't supported on all systems yet, and it's
needed to armor requests for one-time passwords, this service
also provides a way to get anonymous credentials. If you want to support
this, put a keytab for "anonymous.user"  in /var/credserv/anonymous.keytab.
This user should be added to the system with a random password. It should
not have any privileges, and shouldn't be allowed to login anywhere.
(This username is built into both kgetcred and credserv.)
.PP
The code currently assumes that only root can request a specific
principal. Normal users just get their corresponding principal in the default realm.
Root must specific a particular principal, since more than one can be authorized.
.PP
Credserv normally detaches from the terminal, and logs to syslog.
If -d is supplied it remains attached to the terminal, and prints
debug and error messasges there.
.PP
Kgetcred must authenticate itself to the server using the client's
host principal, from /etc/krb5.keytab. (To read it, kgetcred must
run setuid root. It drops privileges as soon as it has read that file.)
.PP
Credserv verifies that the hostname in the principal matches the IP
address from which the request came.
.PP
We assume that key tables are stored on the server in some separate 
process, e.g. a web application.
.PP
NOTE: You must make a service principal for credserv/HOST on the server
and add it to /etc/krb5.keytab.
.SH OPTIONS
.TP
.B \-d
do not detach, and print debugging messages
.SH "SEE ALSO"
kgetcred(1)

