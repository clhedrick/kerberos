.TH RENEWD 8
.SH NAME
renewd \- renew Kerberos credentials for all users automatically
.SH SYNOPSIS
.B renewd
[-w waittime][ -d ]
.SH DESCRIPTION
.I  renewd
renews credentials. It only watches credentials that have been
specifically registered. pam_reg_cc can be used to register 
credentials. Registration is done using a session key (with keyctl).
Thus when the session is finished, the credentials are automatically
removed from being watched.
.PP
This is part of a specific strategy to keep users from losing credentials
or NFS access. The design of sshd, login, libkrb5 and rpc.gssd do
not allow for completely transparent use of Kerberos without agreeing on
some rules.
.PP 
Because multiple login sessions (particularly via sshd) can share the 
same credemtials, you don't do kdestroy on logout, nor can you allow sshd
to do it via GSSAPICleanupCredentials. To avoid having credentials hang
out too long, we are going to set ticket_lifetime in krb5.conf fairly short.
The default parameters for renewd assume it's about an hour. That way
credentials will go away within an hour after logout, but will be renewed
automatically while you're logged in.
.PP 
If we can be sure that credentaisl won't be destroyed, then renewd
can simply keep renewing all active credentials while the user still
has a session alive, with one exception: 
.PP
For NFS to work reliably credentials must be either the primary
credential in KEYRING:persistebt:UID, or they must be in a file
in /tmp owned by the user. We're currently using KEYRING for
interaction logins, and files in /tmp for cron jobs.
.PP
In addition to renewing, renewd removes files matching /tmp/krb5cc_*
if they don't have an unexpired ticket-granting ticket. For the moment
that means that files that aren't Kerberos credential caches at all
will be removed. That may change if it causes issues.
.PP
You can change the pattern of files that renewd examines for removal
by using the pattern argument. E.g. to look at both /tmp/krb5cc_* and
/tmp/tkt*, in krb5.conf, specify the following. Note that regcomp is
called with no arguments, so this is a "basic regexp." That's why the
\ is needed before the |
.PP
.nf
[appdefaults]
renewd = {
    pattern = ^krb5cc_\|^tkt
}
.PP
waittime is the amount of time between successive runs. It defaults
to 50 minutes, which is appropriate for a default ticket lifetime of 1 hour.
.PP
renewd normally detaches from the terminal, and logs to syslog.
If -d is supplied it remains attached to the terminal, and prints
debug and error messasges there. -d can be given more than once
to increase the level of debugging.
.PP
renewd must run as root. Most Kerberos operations are performed as
the user that owns the cache.
